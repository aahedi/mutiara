<script>var url="http://mutiaraonlineshop.com/app/",url_admin="http://mutiaraonlineshop.com/",api_ongkir="http://ongkir.tokojs.com/api_ongkir/",token="6KB4J3xGZX",nama_aplikasi="Mutiara Online Shop",id_pelanggan=localStorage.getItem("id_pelanggan"),ua=navigator.userAgent.toLowerCase(),isAndroid=-1<ua.indexOf("android");function suntikCSS(){var a=document.createElement("style");a.innerHTML=".menu ul li{height:180px}",document.head.appendChild(a)}function logout(){1==confirm("Yakin akan keluar dari akun ini?")&&(localStorage.removeItem("id_pelanggan"),localStorage.removeItem("url_id_kategori"),localStorage.removeItem("url_id_produk"),location.reload())}function menu_kiri(){$("#menu_kiri").html(""),$("#menu_kiri").append("<div>"),$("#menu_kiri").append("<h4>Menu Kiri</h4>"),$("#menu_kiri").append("<ul>");var a=localStorage.getItem("id_pelanggan");""!=a&&a?($("#menu_kiri").append('<li style="list-style:none"><a href="#profile"><i class="icon-user"></i>Profile Anda</a></li>'),$("#menu_kiri").append('<li style="list-style:none"><a href="#riwayat_order"><i class="icon-doc-text"></i>Pembayaran Nota</a></li>'),$("#menu_kiri").append('<li style="list-style:none"><a href="javascript:;" onclick="logout()"><i class="icon-power"></i>Logout</a></li>'),$("#menu_kiri").append('<li style="list-style:none"><a href="#kirim_pesan"><i class="icon-mail"></i>Kirim Pesan</a></li>')):($("#menu_kiri").append('<li style="list-style:none"><a href="#login"><i class="icon-lock"></i>Login</a></li>'),$("#menu_kiri").append('<li style="list-style:none"><a href="#daftar"><i class="icon-vcard"></i>Daftar</a></li>')),$("#menu_kiri").append('<li style="list-style:none"><a href="#kontak"><i class="icon-contacts"></i>Kontak Kami</a></li>'),$("#menu_kiri").append("</ul>"),$("#menu_kiri").append("<div>")}function menu_kanan(){$("#menu_kanan").html(""),$("#menu_kanan").append("<div>"),$("#menu_kanan").append("<h4>Menu Kanan</h4>"),$("#menu_kanan").append("<ul>"),$("#menu_kanan").append('<li style="list-style:none"><a href="#page+1"><i class="icon-pencil"></i>Cara Order</a></li>'),$("#menu_kanan").append('<li style="list-style:none"><a href="#page+3"><i class="icon-lightbulb"></i>Info Reseller</a></li>'),$("#menu_kanan").append('<li style="list-style:none"><a href="#rekening"><i class="icon-tags"></i>Info Rekening</a></li>'),$("#menu_kanan").append('<li style="list-style:none"><a href="#cek_ongkir"><i class="icon-calculator"></i>Cek Ongkir</a></li>'),$("#menu_kanan").append('<li style="list-style:none"><a href="javascript:;" onclick="window.open(\'http://cekresi.com\', \'_blank\', \'location=no\');" ><i class="icon-ticket"></i>Cek Resi</a></li>'),$("#menu_kanan").append('<li style="list-style:none"><a href="#page+2"><i class="icon-star-filled"></i>Testimoni</a></li>'),$("#menu_kanan").append('<li style="list-style:none"><a href="#update"><i class="icon-upload-cloud"></i>Update</a></li>'),$("#menu_kanan").append("</ul>"),$("#menu_kanan").append("</div>")}function menu_tengah(){$("#menu_tengah").html(""),$("#menu_tengah").append('<li id="border"><a href="javascript:;" onclick="openmenu(\'left\');" id="open-left"><img src="image/menu.png"/></a></li>'),$("#menu_tengah").append('<li id="border"><a href="#kategori"><img src="image/produk.png"class="icon_produk"/></a></li>'),$("#menu_tengah").append('<li id="border"><a href="#informasi"><img src="image/info.png"class="icon_info"/></a></li>'),$("#menu_tengah").append('<li id="border"><a href="javascript:;" onclick="buka_keranjang()"><img src="image/keranjang.png"class="icon_keranjang"/></a></li>'),$("#menu_tengah").append('<li id="border" class="bordercari"><a href="javascript:;" onclick="buka_cari()"><img src="image/cari.png"class="icon_cari"/></a></li>'),$("#menu_tengah").append('<li id="border"><a href="javascript:;" onclick="openmenu(\'right\');" id="open-right"><img src="image/lainnya.png"/></a></li>')}function buka_halaman(n,e,i,a){var o=[n,e,i,a].filter(Boolean).join("+");location.hash=o,localStorage.setItem("lokasi",o);var t=cek_id_pelanggan();cek_notif("keranjang"),cek_notif("info"),cek_notif("produk"),cek_notif("pesan"),$("html, body").animate({scrollTop:10},"slow"),$.ajax({url:url+"/"+n+"?&token="+token+"&id_pelanggan="+t+"&prm_1="+e+"&prm_2="+i+"&prm_3="+a,beforeSend:function(){$("#loading").show()},success:function(a){snapper.close(),$("#isi").html(a),$(".bordercari").hide(),localStorage.setItem(o,Base64.encode(a)),"kategori"!=n&&"produk"!=n&&"all"!=n||$(".bordercari").show(),"informasi"==n&&isi_notif("info"),"produk"==n?daftar_produk(e,i):"riwayat_order"==n?buka_riwayat_order(t):"pesan"==n?buka_daftar_pesan(t):$("#loading").hide()},error:function(){1==confirm("Koneksi internet terganggu.. Muat ulang?")?buka_halaman(n,e,i,a):($("#loading").hide(),alert("Mode offline diaktifkan! \nHanya bisa melihat halaman yang pernah dibuka saja dan tidak bisa transaksi"),rute_off(),arah_off())},timeout:6e4})}function noimage(a){a.src="image/default.jpg"}function noimage2(a){a.src="image/default.jpg"}function daftar_produk(e,a){$("#loading").show();var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){var a=n.responseText;$("#result").html(a),$("#loading").hide()}},n.open("GET",url+"/act_produk?token="+token+"&id_pelanggan="+id_pelanggan+"&prm_1="+e),n.send();var i=a;$("#result").load(url+"/act_produk?token="+token+"&prm_1="+e+"&id_pelanggan="+id_pelanggan,{page:i,token:token},function(){$("#loading").hide()}),$("#result").on("click",".pagination a",function(a){a.preventDefault(),$("#loading").show();var n=$(this).attr("data-page");$("#result").load(url+"/act_produk?token="+token+"&prm_1="+e+"id_pelanggan="+id_pelanggan,{page:n,token:token},function(){window.location.href="#produk+"+e+"+"+n,$("#loading").hide()})})}function buka_riwayat_order(e){$("#loading").show();var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){var a=n.responseText;$("#result").html(a),$("#loading").hide()}},n.open("GET",url+"/act_riwayat_order?token="+token+"&id_pelanggan="+e),n.send(),$("#result").on("click",".pagination a",function(a){a.preventDefault(),$("#loading").show();var n=$(this).attr("data-page");$("#result").load(url+"/act_riwayat_order?token="+token+"&id_pelanggan="+e,{page:n,token:token},function(){$("#loading").hide()})})}function buka_daftar_pesan(e){$("#loading").show();var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){var a=n.responseText;$("#result").html(a),$("#loading").hide()}},n.open("GET",url+"/daftar_pesan?token="+token+"&id_pelanggan="+e),n.send(),$("#result").on("click",".pagination a",function(a){a.preventDefault(),$("#loading").show();var n=$(this).attr("data-page");$("#result").load(url+"/daftar_pesan?token="+token+"&id_pelanggan="+e,{page:n,token:token},function(){$("#loading").hide()})})}function convertToRupiah(a){for(var n="",e=a.toString().split("").reverse().join(""),i=0;i<e.length;i++)i%3==0&&(n+=e.substr(i,3)+".");return"Rp. "+n.split("",n.length-1).reverse().join("")}function cari_produk(a,n){$("#hasil_cari").html("<ul><li>Mencari produk...</ul></li>");var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState){var a=e.responseText;document.getElementById("hasil_cari").innerHTML=a}},e.open("GET",url+"/cari_produk?key="+a+"&token="+token+"&id_kategori="+n),e.send()}function cek_notif(n){null!=id_pelanggan&&$.ajax({url:url+"/cek_notif?act="+n+"&token="+token+"&id_pelanggan="+id_pelanggan,success:function(a){"keranjang"==n?0<a?$(".icon_keranjang").attr("src","image/keranjang_2.png"):$(".icon_keranjang").attr("src","image/keranjang.png"):"info"==n?(isi_info=localStorage.getItem("isi_info"),a!=isi_info&&0!=a?$(".icon_info").attr("src","image/info_2.png"):$(".icon_info").attr("src","image/info.png")):"produk"==n?0<a?$(".icon_produk").attr("src","image/produk_2.png"):$(".icon_produk").attr("src","image/produk.png"):"pesan"==n&&(0<a?$(".icon_pesan").attr("src","image/pesan_2.png"):$(".icon_pesan").attr("src","image/pesan.png"))}})}function isi_notif(n){$.ajax({url:url+"/cek_notif?act="+n+"&token="+token+"&id_pelanggan="+id_pelanggan,success:function(a){"info"==n&&localStorage.setItem("isi_info",a)}})}function text_berjalan(){$.ajax({url:url+"/text_berjalan?&token="+token+"&id_pelanggan="+id_pelanggan,success:function(a){$(".text_berjalan").html(a)}})}function cek_versi(n){$.ajax({url:url+"/cek_versi?act="+n+"&token="+token+"&versi="+versi,beforeSend:function(){$("#loading").show()},success:function(a){if("update"==n)""==a?alert("Maaf belum ada update terbaru untuk aplikasi "+nama_aplikasi):window.open(a,"_system");else if("pesan"==n){if(""!=a)1==confirm("Sekarang sudah tersedia update untuk aplikasi "+nama_aplikasi+" versi terbaru, apakah akan update sekarang?")&&window.open(a,"_system")}$("#loading").hide()}})}function buka_keranjang(){var a=cek_id_pelanggan();""!=a&&a?buka_halaman("keranjang"):alert("Untuk membuka keranjang silahkan login atau daftar sebagai member kami.")}function buka_pesan(){var a=cek_id_pelanggan();""!=a&&a?buka_halaman("pesan"):alert("Untuk membuka pesan silahkan login atau daftar sebagai member kami.")}function cek_id_pelanggan(){return localStorage.getItem("id_pelanggan")}function buka_cari(){var a=document.getElementById("kotakcari");"none"!==a.style.display?a.style.display="none":(a.style.display="block",document.getElementById("kata_kunci").focus())}function cek_localstorage(){var a=localStorage.getItem("isi_info");""!=a&&a||localStorage.setItem("isi_info","0")}function louncher_app(a){window.open(a,"_blank","location=no,toolbar=no","closebuttoncaption=Return")}function download(i,o,t){$("#loading").show(),window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(a){var n=encodeURI(t+"download.php?img="+i);ext=n.substr(n.lastIndexOf(".")+1);var e=a.root.toURL();filetransfer(n,e=e+"/"+o+"/"+i,o)},function(a){alert(a.target.error.code)})}function filetransfer(a,n,e){(new FileTransfer).download(a,n,function(a){refreshMedia.refresh(n),alert("Gambar berhasil disimpan, ke direktori: '"+e+"'"),console.log("download complete: "+a.toURL()),$("#loading").hide()},function(a){alert("Penyimpanan gambar gagal: Error Code = "+a.code+" "+e),console.log("download error source "+a.source),console.log("download error target "+a.target),console.log("upload error code"+a.code),$("#loading").hide()},!1,{headers:{Authorization:"Basic dGVzdHVzZXJuYW1lOnRlc3RwYXNzd29yZA=="}})}function onload(){document.addEventListener("deviceready",deviceReady,!1)}function deviceReady(){document.addEventListener("backbutton",backButtonCallback,!1)}function backButtonCallback(){for(var a=location.hash.split("#")[1],n=localStorage.getItem("lokasi").split(" "),e=0;e<n.length;e++)var i=n[e].split("+")[0];null!=a&&"kategori"!=a?localStorage.getItem("lokasi2")===localStorage.getItem("lokasi")||"produk"===i?null==document.getElementById("simple-popup")?buka_halaman("kategori"):$("div").remove("#simple-popup-backdrop, #simple-popup"):navigator.app.backHistory():null==document.getElementById("simple-popup")?navigator.notification.confirm("Keluar dari aplikasi?",confirmCallback,nama_aplikasi,"Ok,Cancel"):$("div").remove("#simple-popup-backdrop, #simple-popup")}function confirmCallback(a){return 1==a&&(localStorage.removeItem("lokasi"),navigator.app.exitApp(),!0)}function hidup(){isAndroid&&window.plugins.insomnia.keepAwake()}function localpush(){1==confirm("Mengaktifkan Notifikasi?")?(cordova.plugins.notification.local.schedule({text:"Halo sista, Selamat belanja ya!",icon:"file://image/logo.png",every:day}),cordova.plugins.notification.local.on("click",function(a){joinMeeting(a.data.meetingId)}),cordova.plugins.notification.local.getTriggered(function(a){alert("Terima kasih telah berkunjung, Anda akan menerima notifikasi. Selamat belanja!")})):cancelpush()}function cancelpush(){cordova.plugins.notification.local.cancelAll(function(){alert("Terima kasih telah berkunjung, Anda tidak akan menerima notifikasi lagi.")},this)}function pushnotif(){if(isAndroid&&null==document.getElementById("web")&&null===localStorage.getItem("regis")){var a=PushNotification.init({android:{senderID:"1084978366514"},ios:{alert:"true",badge:"true",sound:"true"},windows:{}});a.on("registration",function(a){localStorage.setItem("regis",a.registrationId)}),a.on("notification",function(a){-1!=a.title.search("Informasi")?buka_halaman("informasi"):buka_pesan()}),a.on("error",function(a){})}}function rute(){window.onload=function(){arah()},window.onhashchange=function(){arah()}}function arah(){switch(location.hash){case location.hash:var a=location.hash.split("#")[1];null==a?buka_halaman("kategori"):buka_halaman.apply(null,a.split("+"))}}function rute_off(){window.onload=function(){arah_off()},window.onhashchange=function(){arah_off()}}function arah_off(){switch(location.hash){case location.hash:if(!navigator.onLine){var a=location.hash.split("#")[1];null==a?$("#isi").html(Base64.decode(localStorage.getItem("kategori"))):$("#isi").html(Base64.decode(localStorage.getItem(a))),$("#loading").hide();break}location.reload(!0)}}function cek_akses(){var a=cek_id_pelanggan();""!=a&&a||buka_halaman("login")}$(document).ready(function(){onload(),$("#nama_aplikasi").html(nama_aplikasi),menu_kiri(),menu_kanan(),menu_tengah(),cek_localstorage(),rute(),arah(),cek_versi("pesan"),text_berjalan(),suntikCSS()}),$(function(){var n,e=["#F44336","#E91E63","#9C27B0","#3F51B5","#2196F3","#009688","#4CAF50","#FF5722","#795548","#9E9E9E","#000000"];$(".nama_app,#marquee,#judul_isi,.judul_isi").click(function(){for(var a;a=e[Math.floor(Math.random()*e.length)],n==a;);$("#layang").css("background-color",a),$("#marquee").css("background-color",a),$("#judul_isi,.judul_isi").css("background-color",a),$("sup").css("color",a),$(".bagian .bag-right a").css("color",a),n=a})})</script>
